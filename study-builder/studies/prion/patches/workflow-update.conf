{
  "workflow": [
    {
      "from": {
        "type": "START"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "PRIONCONSENT",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "PRIONCONSENT"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "PRIONREQUEST",
          "expression": """user.studies["PRION"].forms["PRIONCONSENT"].questions["prion_consent_s7_age"].hasTrue()"""
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "PRIONREQUEST"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "PRIONMEDICAL"
          "expression": """user.studies["PRION"].forms["PRIONCONSENT"].questions["prion_consent_s7_participation_options"].hasTrue()"""
        }
      ]
    }
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "PRIONMEDICAL"
      },
      "to": [
        {
          "type": "DASHBOARD",
          "expression": "true"
        }
      ]
    }
  ],
  "events": [
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PRIONCONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "PRIONMEDICAL"
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": 1,
      "delaySeconds": null
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PRIONCONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "PRIONREQUEST"
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": 1,
      "delaySeconds": null
      "dispatchToHousekeeping": true,
      "order": 2
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PRIONREQUEST",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "STUDY_EMAIL",
        "templates": [ # This email goes to study staff, so it is always in English regardless of the user's language
          { "emailTemplate": ${emails.data_request}, "language": "en", "isDynamic": true },
          { "emailTemplate": ${emails.data_request}, "language": "es", "isDynamic": true },
          { "emailTemplate": ${emails.data_request}, "language": "he", "isDynamic": true },
          { "emailTemplate": ${emails.data_request}, "language": "zh", "isDynamic": true }
        ],
        "pdfAttachments": []
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null
      "dispatchToHousekeeping": true,
      "order": 1
    }
  ]
}