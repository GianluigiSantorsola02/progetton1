{
  include required("../../snippets/activity-general-form.conf"),
  "formType": "PREQUALIFIER",
  "studyGuid": "cmi-lms",
  "activityCode": "PREQUAL",
  "versionTag": "v1",
  "displayOrder": 1,
  "writeOnce": true,
  "maxInstancesPerUser": 1,
  "excludeFromDisplay": true,
  "allowUnauthenticated": true,
  "translatedNames": [
    {
      "language": "en", "text": ${i18n.en.prequal.name}
    }
  ],
  "translatedTitles": [
    {
      "language": "en", "text": ${i18n.en.prequal.title}
    }
  ],
  "introduction": {
    "nameTemplate": null,
    "icons": [],
    "blocks": [
      {
        "titleTemplate": {
          "templateType": "HTML",
          "templateText": """<p class="paragraph">$prequal_intro_header</p>""",
          "variables": [
            {
              "name": "prequal_intro_header",
              "translations": [
                { "language": "en", "text": ${i18n.en.prequal.intro_header} }
              ]
            }
          ]
        },
        "bodyTemplate": {
          "templateType": "HTML",
          "templateText": """
            <p class="paragraph">$prequal_intro_p1</p>
            <p class="paragraph">$prequal_intro_p2</p>
            <p class="paragraph">$prequal_intro_p3</p>
          """,
          "variables": [
            {
              "name": "prequal_intro_p1",
              "translations": [
                { "language": "en", "text": ${i18n.en.prequal.intro1} }
              ]
            },
            {
              "name": "prequal_intro_p2",
              "translations": [
                { "language": "en", "text": ${i18n.en.prequal.intro2} }
              ]
            },
            {
              "name": "prequal_intro_p3",
              "translations": [
                { "language": "en", "text": ${i18n.en.prequal.intro3} }
              ]
            }
          ]
        },
        "blockType": "CONTENT",
        "shownExpr": null
      }
    ]
  },
  "sections": [
    {
      "nameTemplate": null,
      "icons": [],
      "blocks": [
        // Who is signing up?
        {
          "blockType": "QUESTION",
          "shownExpr": false,
          "question": {
            include required("../../snippets/picklist-question-single-list.conf"),
            "hideNumber": true,
            "stableId": "WHO_ENROLLING",
            "promptTemplate": {
              "templateType": "HTML",
              "templateText": """
                <h3 class="activity-question-title">$who_enrolling_prompt</h3>
              """,
              "variables": [
                {
                  "name": "who_enrolling_prompt",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.who_enrolling.prompt} }
                  ]
                }
              ]
            }
            "picklistOptions": [
              {
                "stableId": "MYSELF",
                "optionLabelTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$who_enrolling_myself",
                  "variables": [
                    {
                      "name": "who_enrolling_myself",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.who_enrolling.myself} }
                      ]
                    }
                  ]
                },
                "allowDetails": false,
                "exclusive": true
              },
              {
                "stableId": "CHILD",
                "optionLabelTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$who_enrolling_child",
                  "variables": [
                    {
                      "name": "who_enrolling_child",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.who_enrolling.child} }
                      ]
                    }
                  ]
                },
                "default": true,
                "allowDetails": false,
                "exclusive": true
              }
            ],
            "validations": [
              {
                "ruleType": "REQUIRED",
                "allowSave": true,
                "hintTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$who_enrolling_required_hint",
                  "variables": [
                    {
                      "name": "who_enrolling_required_hint",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.who_enrolling.required_hint} }
                      ]
                    }
                  ]
                }
              }
            ]
          }
        }
      ]
    },
    {
      "nameTemplate": null,
      "icons": [],
      "blocks": [
        // How old are you?
        {
          "blockType": "QUESTION",
          "shownExpr": null,
          "question": {
            include required("../../snippets/numeric-question.conf"),
            "stableId": "PREQUAL_AGE",
            "hideNumber": true,
            "promptTemplate": {
              "templateType": "HTML",
              "templateText": """
                <h3 class="activity-question-title">$prequal_age_prompt</h3>
              """,
              "variables": [
                {
                  "name": "prequal_age_prompt",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.age.prompt} }
                  ]
                }
              ]
            },
            "placeholderTemplate": {
              "templateType": "TEXT",
              "templateText": "$prequal_age_placeholder",
              "variables": [
                {
                  "name": "prequal_age_placeholder",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.age.placeholder} }
                  ]
                }
              ]
            },
            "validations": [
              {
                "ruleType": "REQUIRED",
                "hintTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$prequal_age_required_hint",
                  "variables": [
                    {
                      "name": "prequal_age_required_hint",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.age.required_hint} }
                      ]
                    }
                  ]
                }
              },
              {
                "ruleType": "INT_RANGE",
                "min": 0,
                "max": 110,
                "hintTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$prequal_age_range_hint",
                  "variables": [
                    {
                      "name": "prequal_age_range_hint",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.age.range_hint} }
                      ]
                    }
                  ]
                }
              }
            ]
          }
        },
        // Where do you live?
        {
          "blockType": "QUESTION",
          "shownExpr": null,
          "question": {
            include required("../../snippets/picklist-question-country-required-eligible-first.conf"),
            "stableId": "PREQUAL_COUNTRY",
            "hideNumber": true,
            "promptTemplate": {
              "templateType": "HTML",
              "templateText": """
                <h3 class="activity-question-title">$prequal_country_prompt</h3>
              """,
              "variables": [
                {
                  "name": "prequal_country_prompt",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.country.prompt} }
                  ]
                }
              ]
            },
            "picklistLabelTemplate": {
              "templateType": "TEXT",
              "templateText": "$prequal_country_label",
              "variables": [
                {
                  "name": "prequal_country_label",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.country.label} }
                  ]
                }
              ]
            },
            "validations": [
              {
                "ruleType": "REQUIRED",
                "hintTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$prequal_country_required_hint",
                  "variables": [
                    {
                      "name": "prequal_country_required_hint",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.country.required_hint} }
                      ]
                    }
                  ]
                }
              }
            ]
          }
        },
        // State for US
        {
          "blockType": "QUESTION",
          "shownExpr": """
            user.studies["cmi-lms"].forms["PREQUAL"].questions["PREQUAL_COUNTRY"].answers.hasOption("US")
          """,
          "question": {
            include required("../../snippets/picklist-question-state-required.conf"),
            "stableId": "PREQUAL_STATE",
            "hideNumber": true,
            "picklistLabelTemplate": {
              "templateType": "TEXT",
              "templateText": "$prequal_state_label",
              "variables": [
                {
                  "name": "prequal_state_label",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.state.label} }
                  ]
                }
              ]
            },
            "validations": [
              {
                "ruleType": "REQUIRED",
                "hintTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$prequal_state_required_hint",
                  "variables": [
                    {
                      "name": "prequal_state_required_hint",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.state.required_hint} }
                      ]
                    }
                  ]
                }
              }
            ]
          }
        },
        // Province for Canada
        {
          "blockType": "QUESTION",
          "shownExpr": """
            user.studies["cmi-lms"].forms["PREQUAL"].questions["PREQUAL_COUNTRY"].answers.hasOption("CA")
          """,
          "question": {
            include required("../../snippets/picklist-question-province-required.conf"),
            "stableId": "PREQUAL_PROVINCE",
            "hideNumber": true,
            "picklistLabelTemplate": {
              "templateType": "TEXT",
              "templateText": "$prequal_province_label",
              "variables": [
                {
                  "name": "prequal_province_label",
                  "translations": [
                    { "language": "en", "text": ${i18n.en.prequal.province.label} }
                  ]
                }
              ]
            },
            "validations": [
              {
                "ruleType": "REQUIRED",
                "hintTemplate": {
                  "templateType": "TEXT",
                  "templateText": "$prequal_province_required_hint",
                  "variables": [
                    {
                      "name": "prequal_province_required_hint",
                      "translations": [
                        { "language": "en", "text": ${i18n.en.prequal.province.required_hint} }
                      ]
                    }
                  ]
                }
              }
            ]
          }
        }
      ]
    }
  ]
}
